<html>
    <head>
        <h2>Linking grocery item and from</h2>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <section>
            <h4>Summary</h4>
            <p>
                One of the major challenges in making this application was linking the grocery lists to grocery items.
                There were two ways to do this, one was to make the database right away through a series of SQL queries.
                The other option was to use "code first migrations." This is where models are implemented and migrations are performed
                using the Nuget Package manager console, which builds the database for you.
                We took the second option.
            </p>
            <p>
                While linking the two tables was not particularly hard, keeping track of what list the user was viewing, and using that
                data to display only the items on that list, as well as to add new items to that list, required several key portions of code.
            </p>
        </section>
        <section>
            <h4>All files involved in this process are below, we will go through them in this order:</h4>
            <ol>
                <li><b><a href = "/files/linking/GroceryList/GroceryList.cs"> the grocery list model </a> </b></li>
                <li><b><a href = "/files/linking/GroceryItem//GroceryItem.cs"> the grocery item model </a> </b></li>
                <li><b><a href = "/files/linking/GroceryList/Index.cshtml"> the GroceryList index page </a> </b></li>
                <li><b><a href = "/files/linking/ViewModels/GroceryItemIndexViewModel.cs"> the Grocery item index page view model </a> </b></li>
                <li><b><a href = "/files/linking/GroceryItem/GroceryItemsController.cs"> the Grocery item controller</a> </b></li>
                <li><b><a href = "/files/linking/GroceryItem/GroceryItemsController.cs"> the GroceryItem index page </a> </b></li>
            </ol>
        </section>
        <section>
            <h4>Linking the files through a code first migration</h4>
            <p>
                First, before we can worry about only displaying the grocery items on a list, we need to actually link the two tables
                using code first migrations.
            </p>
            <ol>
                <li>First, when we create the GroceryList class, we need to give it a primary key. We'll call this GroceryListId.</li>
                <li>Next, we create a list of of the GroceryItem class.</li>
                <img src="/images/linking/GroceryListModel.JPG" alt="grocery list model" width="50%">
                <li>Then we create two fields in the GroceryItem class, one referencing the GroceryList, another referencing its Id</li>
                <img src="/images/linking/GroceryItemModel.JPG" alt="grocery item model" width="50%">
                <li>
                    With this done, we simply perform a code first migration to create the properly linked tables. you
                    can find more info on this  
                    <b><a href = https://docs.microsoft.com/en-us/ef/ef6/modeling/code-first/migrations/#:~:text=Code%20First%20Migrations%20is%20the%20recommended%20way%20to,of%20changes%20you%20make%20to%20your%20EF%20model> here </a>.</b>
                </li>
            </ol>
        </section>
        <section>
            <h4>Now that we have linked the two tables, what do we need?</h4>
            <p>
                From here, we need to keep track of what grocery list the user is on. We'll do this in a variety of ways.
            </p>
            <ol>
                <li>
                    First, the user will start on the GroceryList index page. At this point, the program will know the GroceryListId
                    since the model for this view is the GroceryList.
                </li>
                <li>
                    If the user clicks the <b>Edit [blank] list</b> action link, they will be redirected to the GroceryItem index page.
                </li>
                <img src="/images/linking/ViewModel2.JPG" alt="action link" width="50%">
                <li>
                    As you can see in the above image, a model is passed to the new view. This model is the GroceryItemIndexViewModel.cs class
                    which contains a GroceryListId field. By passing this ViewModel to the new index page, when we look at the GroceryItem
                    index page, we will have the context of what list we are on.
                </li>
                <img src="/images/linking/ViewModel1.JPG" alt="action link" width="50%">
            </ol>>
        </section>
        <section>
            <b><a href = https://andersmatthewlong.github.io/index.html> back </a>.</b>
        </section>
    </body>

</html>